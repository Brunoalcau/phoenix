language: node_js
matrix:
  fast_finish: true
  include:
  - name: Build BurstJS
    os: linux
    node_js: '10'
    env: JOB=burstjs
  - name: Build Web Wallet
    os: linux
    node_js: '10'
    env: JOB=web
  - name: Build Desktop Wallet
    if: branch=~ /^force-deploy-/
    os: osx
    node_js: '10'
    env: JOB=desktop-osx
  - name: Build Desktop Wallet Staged
    - stage: Run BurstJS Tests
      script: echo ${GH_PAGES} && echo BurstJS Tests
    - stage: Run Build Web Wallet
      script: echo Web Wallet Build
    - stage: Deploy
      script: echo Desktop Wallet

before_cache:
- rm -rf $HOME/.cache/electron-builder/wine
cache:
  directories:
  - node_modules
  - "$HOME/.cache/electron"
  - "$HOME/.cache/electron-builder"
script:
- "./scripts/ci/$JOB.sh"
